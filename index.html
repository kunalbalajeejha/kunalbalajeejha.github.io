<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Changing Phone Number in Address Book by kunalbalajeejha</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Changing Phone Number in Address Book</h1>
        <p>Github Pages for Kunal</p>


        <p class="view"><a href="https://github.com/kunalbalajeejha">View My GitHub Profile</a></p>

      </header>
      <section>
        <p>I have recently travelled from Singapore to Chennai. And all my contact numbers are having the number "019" added infront of them. This was done, so as to get the cheaper rates when calling to India. Now that I am back in India, I was faced with the task of manually (either on Mac or iPhone) replacing all the number "019" with "+" sign in my contacts.
Then I remembered about <em>AppleScript</em> and how I can easily do this with a little bit of programming.
The result is the below peice of code. In this process I also re-discovered the <a href="http://www.macosxautomation.com">Mac OSX Automation</a> website, which has the sub-routine for <a href="http://www.macosxautomation.com/applescript/sbrt/sbrt-06.html">text search and replace</a>.</p>

<pre><code>on replace_chars(this_text, search_string, replacement_string)
    set AppleScript's text item delimiters to the search_string
    set the item_list to every text item of this_text
    set AppleScript's text item delimiters to the replacement_string
    set this_text to the item_list as string
    set AppleScript's text item delimiters to ""
    return this_text
end replace_chars

tell application "Address Book"
    repeat with i from 1 to (count every person)
        set phoneProperties to properties of phones of person i
        repeat with j from 1 to (count of phoneProperties)
            if value of item j of phoneProperties contains "019" then
                set phoneNumber to value of item j of phoneProperties
                set the phoneNumber to replace_chars(phoneNumber, "019", "+") of me
                log phoneNumber
                set value of item j of phones of person i to phoneNumber
            end if
        end repeat
    end repeat
    save
end tell
</code></pre>
      </section>
      <footer>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-27323066-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>